location ~* /${DRUPAL_PUBLIC_FILES_PATH}/(css|js)/(.*) {
    set $bucket_base_url ${NGINX_OSB_BUCKET};
    set $file_path $1/$2;
    resolver ${NGINX_OSB_RESOLVER};

    # Remove any existant Cache-Control header to prevent duplicated headers and
    # allow us to override it a line below.
    proxy_hide_header Cache-Control;
    add_header Cache-Control "${NGINX_CACHE_CONTROL_HEADER}";

    # Here we use proxy_intercept_errors to catch 404 and 403 errors from bucket and rewrite them to Drupal.
    proxy_intercept_errors on;
    error_page 404 = @rewriteQuery;
    error_page 403 = @rewriteQuery;
    # Here we can include any custom location fragment.
    include /etc/nginx/conf.d/fragments/location/osb/*.conf;
    proxy_pass $bucket_base_url/$file_path$is_args$args;

    # Remove Authorization header if present.
    proxy_set_header Authorization "";

    #hidegoogleheaders
}
